(function(e){function t(t){for(var s,l,i=t[0],o=t[1],c=t[2],p=0,d=[];p<i.length;p++)l=i[p],n[l]&&d.push(n[l][0]),n[l]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,i=1;i<a.length;i++){var o=a[i];0!==n[o]&&(s=!1)}s&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var s={},n={app:0},r=[];function l(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=s,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(a,s,function(t){return e[t]}.bind(null,s));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("64a9"),n=a.n(s);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),n=a("5c96"),r=a.n(n),l=(a("0fae"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",{attrs:{height:"400"}},[a("h1",{staticStyle:{"text-align":"center"}},[e._v("minium 测试报告")])]),a("el-container",[a("el-aside",{attrs:{width:"500px"}},[a("el-col",[a("el-row",[a("el-card",[a("p",[e._v("用例总数: "+e._s(e.summary.case_num))]),a("p",[e._v("失败用例: "+e._s(e.summary.failed))]),a("p",[e._v("错误用例: "+e._s(e.summary.error))]),a("p",[e._v("平均耗时: "+e._s(e.summary.costs))])])],1),a("el-row",{staticStyle:{"padding-top":"2em"}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.caseDatas,"highlight-current-row":""},on:{"row-click":e.tableRowClick}},[a("el-table-column",{attrs:{prop:"run_time",label:"执行时间",width:"180"}}),a("el-table-column",{attrs:{prop:"case_name",label:"用例名称",width:"180"}}),a("el-table-column",{attrs:{prop:"case_name",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.statusClass(t.row),effect:"”dark"}},[e._v(e._s(e.statusMsg(t.row)))])]}}])})],1)],1)],1)],1),a("el-main",[e.caseDetail?a("CaseDetail",{attrs:{caseDetail:e.caseDetail}}):e._e()],1)],1),a("el-footer",{staticStyle:{"text-align":"center"}},[a("p",[e._v("Minium Designed by 掌通宝")]),a("p",[e._v("Copyright © 1998-2019 Tencent Inc. All Rights Reserved")])])],1),a("el-backtop",[a("div",{staticStyle:{"{\n      height":"100%",width:"100%","background-color":"#f2f5f6","box-shadow":"0 0 6px rgba(0,0,0, .12)","text-align":"center","line-height":"40px",color:"#1989fa"}},[e._v("\n    Top\n  ")])])],1)}),i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"case-detail"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("执行环境")])]),a("el-row",[a("el-col",{attrs:{span:12}},[a("h4",[e._v("环境")]),a("p",[e._v("设备: "+e._s(e.caseDetail.device.system_info.model))]),a("p",[e._v("平台: "+e._s(e.caseDetail.device.system_info.platform))]),a("p",[e._v("系统: "+e._s(e.caseDetail.device.system_info.system))]),a("p",[e._v("基础库: "+e._s(e.caseDetail.device.system_info.SDKVersion))])]),a("el-col",{attrs:{span:12}},[a("h4",[e._v("运行信息")]),a("p",[e._v("名称: "+e._s(e.caseDetail.module))]),a("p",[e._v("包名: "+e._s(e.caseDetail.case_name))]),a("p",[e._v("耗时: "+e._s(1e3*(e.caseDetail.stop_timestamp-e.caseDetail.start_timestamp).toFixed(3))+"ms")]),a("p",[e._v("结果: "+e._s(e.statusMsg(e.caseDetail)))])])],1)],1)],1),a("el-col",{staticStyle:{"margin-left":"1em"},attrs:{span:10}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用例说明")])]),a("pre",[e._v(e._s(e.caseDetail.case_doc))])])],1)],1),a("el-collapse",[a("el-collapse-item",{attrs:{title:"运行截图",name:"capture"}},[e.caseDetail.screen_info&&e.caseDetail.screen_info.length>0?a("el-col",[a("el-row",{attrs:{type:"flex"}},e._l(e.caseDetail.screen_info,function(t,s){return a("el-col",{key:s,attrs:{span:4}},[a("img",{staticStyle:{width:"95%"},attrs:{src:e.prefix+"/"+t.path}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[e._v(e._s(t.datetime))])])])])}),1)],1):e._e()],1),a("el-collapse-item",{attrs:{title:"代码和堆栈",name:"code"}},[e.codeShow?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("h3",[e._v("代码")]),e._l(e.caseDetail.source.code,function(t,s){return a("div",{key:s},[e.caseDetail.failed_line_num===e.caseDetail.source.start+s?a("pre",{staticStyle:{color:"red"}},[e._v(e._s(t))]):a("pre",{attrs:{"data-lang":"Python"}},[a("code",[e._v(e._s(t))])])])})],2),a("el-col",{attrs:{span:12}},[a("h3",[e._v("错误堆栈")]),e.caseDetail.errors?a("div",[a("pre",{staticStyle:{color:"red"}},[e._v(e._s(e.caseDetail.errors))])]):e._e()])],1):e._e()],1),a("el-collapse-item",{attrs:{title:"运行日志",name:"log"}},[a("div",{staticClass:"log-box"},e._l(e.logs,function(t,s){return a("pre",{key:s,class:e.getLogClass(t)},[e._v(e._s(t))])}),0)]),a("el-collapse-item",{attrs:{title:"小程序日志",name:"weapp-log"}},[a("div",{staticClass:"log-box"},e._l(e.appLogs,function(t,s){return a("pre",{key:s,class:e.getLogClass(JSON.stringify(t))},[e._v(e._s("["+t.type+"] - "+JSON.stringify(t.args)+"\n\n"))])}),0)])],1)],1)},c=[],u=(a("6762"),a("2fdb"),a("28a5"),a("bc3a")),p={name:"CaseDetail",props:{caseDetail:Object},data:function(){return{codeShow:!0,showLog:!1,logs:[],appLogs:[]}},methods:{refresh:function(){var e=this;u.get("".concat(this.prefix,"/").concat(this.caseDetail.log_filename)).then(function(t){e.logs=t.data.split("\n")}).catch(function(e){console.log(e)}),u.get("".concat(this.prefix,"/").concat(this.caseDetail.weapp_log_path)).then(function(t){e.appLogs=t.data.split("\n");for(var a=0;a<e.appLogs.length;a++)""!==e.appLogs[a]?e.appLogs[a]=JSON.parse(e.appLogs[a]):e.appLogs.pop(a)}).catch(function(e){console.log(e)})},getLogClass:function(e){return console.log(e),e.includes("NATIV")||e.includes("DEBUG")||e.includes("METHO")||e.includes('"debug"')?"log-debug":e.includes("INFO")||e.includes('"log"')||e.includes('"info"')?"log-info":e.includes("WARN")||e.includes('"warn"')?"log-warning":"log-error"},statusMsg:function(e){return e.success?"成功":e.is_error?"异常":e.is_failure?"失败":void 0}},mounted:function(){this.refresh()},computed:{prefix:function(){return"".concat("").concat(this.caseDetail.relative)}},watch:{caseDetail:function(){this.refresh()}}},d=p,f=(a("ed20"),a("2877")),_=Object(f["a"])(d,o,c,!1,null,"2917044c",null),g=_.exports,m=a("bc3a"),h={name:"app",components:{CaseDetail:g},data:function(){return{metadata:null,caseDetailIndex:1,caseDetail:0}},mounted:function(){var e=this;m.get("".concat("","meta.json")).then(function(t){e.metadata=t.data,e.$refs.singleTable.setCurrentRow(e.caseDetail=e.metadata.case_datas[0])})},methods:{tableRowClassName:function(e){var t=e.row;e.index;return t.success?"success-row":t.failure?"warning-row":"error-row"},tableRowClick:function(e){console.log(e),this.caseDetail=e},statusClass:function(e){return e.success?"success":e.is_error?"danger":e.is_failure?"warning":void 0},statusMsg:function(e){return e.success?"成功":e.is_error?"异常":e.is_failure?"失败":void 0}},computed:{caseDatas:function(){return this.metadata?this.metadata.case_datas:[]},summary:function(){return this.metadata?this.metadata.summary:{}}}},v=h,y=(a("034f"),Object(f["a"])(v,l,i,!1,null,null,null)),b=y.exports;s["default"].config.productionTip=!1,s["default"].use(r.a),new s["default"]({render:function(e){return e(b)}}).$mount("#app")},"64a9":function(e,t,a){},c9d6:function(e,t,a){},ed20:function(e,t,a){"use strict";var s=a("c9d6"),n=a.n(s);n.a}});
//# sourceMappingURL=app.74bfc160.js.map